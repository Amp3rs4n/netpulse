<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f0f1b" id="themeColorMeta" />
  <title>NetPulse</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>NetPulse</h1>
      <p>–ú–∏—Ç—Ç—î–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –≤–∞—à–æ–≥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è</p>
    </header>

    <main>
      <section class="feature-card">
        <h2>–®–≤–∏–¥–∫—ñ—Å—Ç—å</h2>
        <p>–¢–µ—Å—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</p>
        <a class="btn" href="speed.html">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</a>
      </section>

      <section class="feature-card">
        <h2>–ü—ñ–Ω–≥</h2>
        <p>–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–∫–∏ —Ç–∞ –¥–∂–∏—Ç—Ç–µ—Ä–∞</p>
        <a class="btn" href="ping.html">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</a>
      </section>

      <section class="feature-card">
        <h2>–ú–µ—Ä–µ–∂–∞</h2>
        <p>IP-–∞–¥—Ä–µ—Å–∞, –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—è</p>
        <a class="btn" href="network.html">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</a>
      </section>
    </main>

    <footer class="footer">
      &copy; 2025 NetPulse
      <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
        <a href="history.html" class="btn btn-small" title="–Ü—Å—Ç–æ—Ä—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤">
          üìÑ –Ü—Å—Ç–æ—Ä—ñ—è
        </a>
        <button id="themeToggleBtn">üåô</button>
        <button id="loginBtn" class="btn btn-small google-login">
          <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" style="width: 1rem; vertical-align: middle; margin-right: 0.5rem;">
          –£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
        </button>
      </div>
    </footer>
  </div>

  <script type="module" src="theme.js"></script>
  <script type="module" src="gradient-sync.js"></script>
  <script>
    function getParamsFromURL() {
      const url = new URL(window.location.href);
      const name = url.searchParams.get("name");
      const email = url.searchParams.get("email");
      const photo = url.searchParams.get("photo");

      if (email && name) {
        localStorage.setItem("netpulse_user_email", email);
        localStorage.setItem("netpulse_user_name", name);
        if (photo) localStorage.setItem("netpulse_user_photo", photo);
        // –ß–∏—Å—Ç–∏–º–æ URL
        window.history.replaceState({}, document.title, location.pathname);
        return { name, email, photo };
      }

      return {
        name: localStorage.getItem("netpulse_user_name"),
        email: localStorage.getItem("netpulse_user_email"),
        photo: localStorage.getItem("netpulse_user_photo")
      };
    }

    document.addEventListener("DOMContentLoaded", () => {
      const loginBtn = document.getElementById("loginBtn");
      const user = getParamsFromURL();

      if (user?.email) {
        loginBtn.innerHTML = `üë§ ${user.name?.split(" ")[0] || "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á"}`;
        loginBtn.disabled = true;
        loginBtn.style.opacity = 0.7;
      } else {
        loginBtn.addEventListener("click", () => {
          window.location.href = "https://netpulse-server.onrender.com/auth/google";
        });
      }
    });
  </script>
</body>
</html>
